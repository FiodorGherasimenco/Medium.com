<!DOCTYPE html>
<html lang="en" manifest="developers.appcache">
<head>
    <title>Medium </title>
    <link rel="shortcut icon" href="img/Logo.png" type="image/png">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="My story, Medium.com, Write my story, read new stories">
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="../ckeditor.js"></script>
    <script src="js/sample.js"></script>
    <link rel="stylesheet" href="css/samples.css">
    <link rel="stylesheet" href="toolbarconfigurator/lib/codemirror/neo.css">

    <!-- // <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/Style.css" >
</head>
<body>
<nav class="navbar navbar-trans navbar-fixed-top" role="navigation">
    <div class="container" style="width:100%;">
        <div class="navbar-header">
            <a href="index.html"> <img src="./img/A.png" class="medium"></a>
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapsible">
                <span class="glyphicon glyphicon-menu-hamburger"></span>
            </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-collapsible">
            <ul class="nav navbar-nav navbar-left">
                <!-- <li><img src="./Images/A.png" class="medium"></li> -->
                <li class="list"><a href="index.html"><b>Home</b></a></li>
                <li class="list"><a href="#">Top Stories</a></li>
                <li class="list"><a href="#">Bookmark</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                  <button class="btn btn-primary" type="button" id="nav-button" onclick="window.open('index.html')"><span class="glyphicon glyphicon-pencil"></span>&nbsp&nbspWrite a Story</button>
                </li>
                <li class="list">
                    <a>Search  </a>
                        <!-- <div id="search-input">
                            <div class="input-group col-md-12">
                                <input type="text" class="form-control input-lg" placeholder="Buscar" />
                                <span class="input-group-btn">
                                    <button class="btn btn-info btn-lg" type="button">
                                        <i class="glyphicon glyphicon-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
 -->                    
                </li>
            </ul>
        </nav>
    </div>
</nav>
<section class="MainBody">
    <div class="row">
        <!-- Left Side -->
        <div class="col-sm-3">
            
        </div>
    <!-- center -->
        <div class="col-sm-6" style="margin-top: 50px;">
            <form role="form StoryForm">
                <div class="form-group" >
                    <main>
                        <div class="adjoined-bottom">
                            <div class="grid-container">

                                <div class="grid-width-100">
                                        <img src="img/Profile.jpg" class="img-circle" alt="Sahil" width="40px" height="40px" style="float: left;">
                    				<label id="Username" style="color:#00AB6B; margin-top: 10px;display: ;">&nbsp&nbspSahil Upadhyay</label>
                    				<hr></hr>
					            	
                                    <div id="editor">
	                                    <p>Hello <strong>Sahil</strong></p>
                                    </div>
								</div>
                            </div>
							
                            <center>
								<a class="btn icon-btn btn-info" href="#" onclick="publish()">&nbsp&nbspPublish</a>
								<a class="btn icon-btn btn-info" href="index.html">&nbsp&nbspReset</a>
                            </center>
                        </div>
                    </div>
            </form>
	        <div class="readstory" id="readStoryDiv" style="display: none;">
	        	<img src="img/Profile.jpg" class="img-circle" alt="Sahil" width="40px" height="40px" style="float: left;">
	            <label id="Username" style="color:#00AB6B; margin-top: 10px;display: ;">&nbsp&nbspSahil Upadhyay</label>
	            <hr></hr>
	            <div >
	            	<p id="copyStory">
	            		
	            	</p>
	            	<hr></hr>
		            <div id="tagDiv" style="width: 80%;display: none;">
		            	<h4>Tags Used:</h4>
		            	<p class="tagsUsed" style="margin-left:10%;">
		            		
		            	</p>
		            </div>
	            </div>
	        </div>
        </div>
        <script>
            initSample();
        </script>
    <!-- Right Side -->

        <div class="col-sm-3" class="tags" style="margin-top: 100px;">
            <h3>Featured tags</h3>
            <hr></hr>
            <div class="alert myTags">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    ×</button>
               <span class="glyphicon glyphicon-tag"></span> 
                    ISIS
            </div>
            <div class="alert myTags">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    ×</button>
               <span class="glyphicon glyphicon-tag"></span> 
                    NCAA
            </div>
            <div class="alert myTags">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    ×</button>
               <span class="glyphicon glyphicon-tag"></span> 
                    Apple
            </div>
            <div class="alert myTags">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    ×</button>
               <span class="glyphicon glyphicon-tag"></span> 
                    Sexism
            </div>
            <div class="alert myTags">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    ×</button>
               <span class="glyphicon glyphicon-tag"></span> 
                    TEDx
            </div>
            <div class="alert myTags">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    ×</button>
               <span class="glyphicon glyphicon-tag"></span> 
                    Donald Trump

            </div>
            <div class="alert myTags">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    ×</button>
               <span class="glyphicon glyphicon-tag"></span> 
                    Open Letter
            </div>
            <div class="alert myTags ">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
                    ×</button>
               <span class="glyphicon glyphicon-tag"></span> 
                    Cuba
            </div>
        </div>
    </div>
</section>
<script>
	function publish() {
		$("#readStoryDiv").css("display","block");
		$('.cke_wysiwyg_frame.cke_reset').contents().find('.cke_editable p').appendTo("#copyStory");
		$('.form-group').css("display","none");
		var tags=["ISIS","NCAA","Open Letter","Cuba","Donald Trump","Sexism","Tedx","Apple"];
		var searchin = $("#copyStory").html().toLowerCase();
		var tagsUsedArr = [];
		var processedString = searchin;
		var searchIndex;
		var lowerCaseTag;
		for (var i = 0; i < tags.length; i++) {
			lowerCaseTag = tags[i].toLowerCase();
			// searchIndex = 0;
			searchIndex = processedString.search(lowerCaseTag);
			// console.log(i, processedString, lowerCaseTag, searchIndex);
			if(searchIndex !== -1) {
				$("#tagDiv").css("display","block");
				tagsUsedArr.push(tags[i]);
				// console.log('processedString before replace:', processedString, searchIndex);
				var pro = processedString.replace(processedString.substr(searchIndex, searchIndex + lowerCaseTag.length), "<span style='color: red'>" + tags[i] + "</span>");
				console.log(i, processedString, lowerCaseTag, searchIndex);
				$('#copyStory').html(pro);
			}
		}
		console.log(processedString);
		$('.tagsUsed').html(tagsUsedArr.join(' | '));
	}
</script>
</body>
</html>
